---
import { getCollection } from "astro:content";
import BaseLayout from "@/layouts/BaseLayout.astro";
const allPosts = await getCollection("posts");
const tags = [...new Set(allPosts.map((post) => post.data.tags).flat())];
const pageTitle = "Tag Index";
---

<BaseLayout pageTitle={pageTitle}>
  <section>
    <div class="mx-auto max-w-3xl px-8 py-16">
      <p
        class="text-2xl font-medium tracking-tight text-neutral-900 dark:text-white sm:text-4xl">
        Tag index
      </p>
      <p class="mt-4 text-neutral-500 dark:text-neutral-400">
        Here you will find a list of all the tags used in the blog. Click on the
        tag to see all the blog posts that have been tagged with that tag.
      </p>
      <div class="py-12 mt-24 border-t dark:border-neutral-700  divide-y">
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-12 items-start py-12">
          <p
            class="text-lg font-semibold leading-6 text-neutral-900 dark:text-white group-hover:text-blue-400">
            A
          </p>
          <ul
            role="list"
            class="lg:col-span-2">
            {
              tags
                .filter((tag) => tag.toLowerCase().startsWith("a"))
                .map((tag, index) => (
                  <li>
                    <a
                      class="text-lg capitalize font-semibold leading-6 hover:text-blue-400 text-neutral-900 dark:text-white group-hover:text-blue-400"
                      href={`/tags/${tag}`}>
                      ⏤ {tag}
                    </a>
                  </li>
                ))
            }
          </ul>
        </div>
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-12 items-start py-12">
          <p
            class="text-lg font-semibold leading-6 text-neutral-900 dark:text-white group-hover:text-blue-400">
            B
          </p>
          <ul
            role="list"
            class="lg:col-span-2">
            {
              tags
                .filter((tag) => tag.toLowerCase().startsWith("b"))
                .map((tag, index) => (
                  <li>
                    <a
                      class="text-lg capitalize font-semibold leading-6 hover:text-blue-400 text-neutral-900 dark:text-white group-hover:text-blue-400"
                      href={`/tags/${tag}`}>
                      ⏤ {tag}
                    </a>
                  </li>
                ))
            }
          </ul>
        </div>
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-12 items-start py-12">
          <p
            class="text-lg font-semibold leading-6 text-neutral-900 dark:text-white group-hover:text-blue-400">
            C
          </p>
          <ul
            role="list"
            class="lg:col-span-2">
            {
              tags
                .filter((tag) => tag.toLowerCase().startsWith("c"))
                .map((tag, index) => (
                  <li>
                    <a
                      class="text-lg capitalize font-semibold leading-6 hover:text-blue-400 text-neutral-900 dark:text-white group-hover:text-blue-400"
                      href={`/tags/${tag}`}>
                      ⏤ {tag}
                    </a>
                  </li>
                ))
            }
          </ul>
        </div>
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-12 items-start py-12">
          <p
            class="text-lg font-semibold leading-6 text-neutral-900 dark:text-white group-hover:text-blue-400">
            All tags
          </p>
          <ul
            role="list"
            class="lg:col-span-2">
            {
              tags.sort().map((tag, index) => (
                <li class="py-3">
                  <a
                    class="text-lg capitalize font-semibold leading-6 hover:text-blue-400 text-neutral-900 dark:text-white group-hover:text-blue-400"
                    href={`/tags/${tag}`}>
                  ⏤ {tag}
                  </a>
                </li>
              ))
            }
          </ul>
        </div>
      </div>
    </div>
  </section>
</BaseLayout>
